image: Ubuntu

clone_script:
- cmd: git clone --recursive --branch=%APPVEYOR_REPO_BRANCH% https://github.com/%APPVEYOR_REPO_NAME%.git %APPVEYOR_BUILD_FOLDER%
- cmd: git checkout -f %APPVEYOR_REPO_COMMIT%

install:
- sudo apt update -qq && sudo apt install -qq
- sudo apt -y install build-essential git cmake
- sudo apt -y install libgraphviz-dev

cache:
- '/usr/lib/x86_64-linux-gnu/'

build_script:
- mkdir build && cd build
- cmake -DCMAKE_BUILD_TYPE=$Configuration ..
- make
